<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.js"></script>
        <script src="chess-engine/chess-engine.js"></script>

        <meta charset='utf-8'>
    </head>
    <body>
        <h1 class="name_text"><a href="https://www.erdavids.com" class="color-text">Eric Davidson</a></h1>
        <div class="nav_bar bottom_border">
            <ul>
                <li class="nav_bar_element"><a href="/projects">Projects</a></li>
                <li class="nav_bar_element"><a href="/blog">Blog</a></li>
                <li class="nav_bar_element"><a href="/art">Art</a></li>
                <li class="nav_bar_element"><a href="/more">More</a></li>
            </ul>
        </div>

        <div class="project_block">
          <h2>Crooked Rook</h2>

          <p>A custom chess engine completely <span class="color-text">completely from scratch</span> in only one week, strangely inspired by an episode of <span class="color-text">Lost</span>. I'm using P5.js for the graphics but the game logic is written solely by me in pure Javascript. No existing chess frameworks were used.</p>
          <p>Take a look below the game to read more about how it was created, find out what I was able to accomplish in my one week timeframe, and see a video of me losing to the engine that I created.</p>
          <p>Try to beat the Crooked Rook at his <span class="color-text">own game</span> but be careful ... he cheats!</p>


          <div class="project_block">
            <div class="project_block">
              <div style="text-align:center">
                <button id="status" class="button" onclick="change_all_colors">WHITE to move</button>
              </div>
              <div class="row_2">
                <div class="column_6">
                  <div id="sketchdiv" style="min-height: 1px;">
                  </div>
                </div>
              </div>
              <div style="text-align:center">
                <button class="button" onclick="set_difficulty_one()">1</button>
                <button class="button" onclick="set_difficulty_two()">2</button>
                <button class="button" onclick="set_difficulty_three()">3</button>
                <button class="button" onclick="set_difficulty_four()">4</button>
                <button class="button" onclick="set_difficulty_five()">5</button>
                |
                <button id="cheating-btn" class="button" onclick="toggle_cheating()">Cheating</button>
                |
                <button class="button" onclick="reset_game()">Reset</button>
                <br>
                <button class="button" onclick="change_pieces_to_alpha()">Alpha</button>
                <button class="button" onclick="change_pieces_to_kosal()">Kosal</button>
                <button class="button" onclick="change_pieces_to_letter()">Letter</button>

              </div>

            </div>
          </div>

          <h3>How It Works</h3>
          <p>The general idea of a Chess engine is for the AI to <span class="color-text">"look ahead"</span> a certain number of moves in order to find the action that <span class="color-text">maximizes</span> it's own position or strength. The complexity comes in when accounting for how the enemy, the human player, will try to <span class="color-text">minimize</span> the AI's position.</p>
          <p>Position is determined by <span class="color-text">two factors</span>, the first being that each piece has an <span class="color-text">assigned value</span>. The pawns for example are valued at <span class="color-text">100</span> while each king is valued at <span class="color-text">20,000</span>. In addition to these static values, each piece has a seperate <span class="color-text">piece-square table</span> that promotes specific places on the board by offering value. The king is encouraged to stay in a <span class="color-text">defensive position</span> while the knights are encouraged to <span class="color-text">maximize their movement</span> options. Ideally as the game progresses these tables would change to reflect the <span class="color-text">state of the game</span>, but I did not have time to go beyond a single table for each piece.</p>
          <p>Taking the position evaluation functions into account, when it becomes the <span class="color-text">AI's turn</span>, it loops through each available move. If the desired <span class="color-text">depth</span> of evaluation is greater than zero, then for every move the AI can make, it will also loop through each available move for the <span class="color-text">human player</span>. If the depth permits, then the next stage is to evaluate each of the possible moves the AI could make in response.</p>
          <p>The more <span class="color-text">moves ahead</span> the AI can look, the stronger it will be. Unfortunately, there are just too many moves in the game of Chess for each possible scenario to be evaluated all the way to the end of the game. Luckily, a <span class="color-text">pruning system</span> is in place to limit the number of moves that are evaluated. The idea is to compare <span class="color-text">current positions</span> against previously evaluated branches in order to determine if they're even worth pursuing.</p>
          <p>If you'd like to learn more about the code that make all this possible, check out the source code for the Crooked Rook <a href="https://github.com/erdavids/PersonalWebsite/blob/master/projects/chess-engine/chess-engine.js" target="_blank">here</a>. For anyone looking to create their own Chess engine, I received enormous benefit from the Chess programming wiki found <a href="https://www.chessprogramming.org/Main_Page" target="_href">here</a>.</p>

          <h3>Accomplishments</h3>
          <p>I'm <span class="color-text">extremely proud</span> of what I was able to accomplish in only <span class="color-text">one week</span>. I started with essentially no knowledge of how Chess engines are designed and was able to create a system in 1600 lines of JavaScript that can <span class="color-text">reliably beat me</span> at Chess.</p>
          <p>With the correct implementation of Alpha-Beta pruning and some unique check avoidance, I enabled the engine to comfortably play up to a <span class="color-text">depth of five</span>. The number of positions evaluated at different stages of the game is still unbelievable. For example, by about <span class="color-text">six moves</span> into my most recent game with the Crooked Rook, it evaluated <span class="color-text">2,023,878</span> positions in just under <span class="color-text">8 seconds</span> before moving a piece.</p>

          <h3>What I Could Have Improved</h3>
          <p>I started the project by creating a <span class="color-text">simple grid system</span> that would allow me to move pieces based on the rules of Chess. I was excited to get something <span class="color-text">working quickly</span>, but later on in the process I became inhibited by my earlier design. For example, I failed to add the fundamental capability of <span class="color-text">castling kings</span>. Based on my structure for determining valid moves, it would have taken me at least two days of working time in order to add the ability. I do think my system works very well for what it is, but I would like to try a different way in the future.</p>
          <p>There are <span class="color-text">countless improvements</span> I could make to the AI itself, and many of them I plan on incorporating into the <span class="color-text">next version</span>. The most important thing with a Chess engine is to increase the depth it is capable of reaching. An example of an improvement that would help is <span class="color-text">sorting the moves</span> evaluated instead of looking at each piece arbitrarily.</p>


        </div>



        <div class="project_block">
          <div class="row_3">
              <div class="column_6">
                  <a href="../Images/Oblong/Oblong-1-367.png"><img src="../Images/Oblong/Oblong-1-367.png" style="width:100%"/></a>
              </div>
          </div>
          <h3>I hope you had fun battling the Crooked Rook! Here's some other cool things you might like...</h3>
          <div class="row_3">
            <div class="column_3">
              <p style="padding-left:25px"><a href="../art/letter-home" target="_blank">> Letter Home</a></p>
          </div>
            <div class="column_3">
          </div>
          </div>

        </div>

        <div style="margin-bottom: 4em;"></div>

        <div class="project_block">
          <div class="nav_bar">
              <ul>
                  <li class="nav_bar_element"><a href="https://github.com/erdavids"><ion-icon name="logo-octocat"></ion-icon></a></li>
                  <li class="nav_bar_element"><a href="https://www.linkedin.com/in/eric-davidson-70b615ab/"><ion-icon name="logo-linkedin"></ion-icon></a></li>
                  <li class="nav_bar_element"><a href="https://twitter.com/TheBuffED"><ion-icon name="logo-twitter"></ion-icon></a></li>
                  <li class="nav_bar_element"><a href="https://www.youtube.com/channel/UCUrmX3SvpPerq-KAfGBrgGQ?view_as=subscriber"><ion-icon name="logo-youtube"></ion-icon></a></li>
              </ul>
          </div>
          <div class="nav_bar">
            <ul>
              <li class="nav_bar_element"><script type='text/javascript' src='https://ko-fi.com/widgets/widget_2.js'></script><script type='text/javascript'>kofiwidget2.init('Buy me a coffee', '#4fa4a5', 'A0A6YGXL');kofiwidget2.draw();</script></li>
            </ul>
          </div>
        </div>

        <div style="margin-bottom: 4em;"></div>

        <script>


          var myArray = ['#d47564', '#CAA67A', '#4fa4a5'];

          var elements = document.getElementsByClassName("color-text");
          var c = ''
          var last_c = ''
          for(var i=0; i<elements.length; i++) {
              c = myArray[Math.floor(Math.random() * myArray.length)];
              while (c == last_c) {
                c = myArray[Math.floor(Math.random() * myArray.length)];
              }
              elements[i].style.color = c;
          }

          var links = document.getElementsByTagName("a");
          for(var i=0;i<links.length;i++)
          {
              if(links[i].href)
              {
                  links[i].style.color = myArray[Math.floor(Math.random() * myArray.length)];
              }
          }
        </script>
        <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
    </body>
</html>
