<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.js"></script>
        <script src="chess-engine/chess-engine.js"></script>

        <meta charset='utf-8'>
    </head>
    <body>



        <div class="project_block">

            <div class="name_text"><a href="https://www.erdavids.com">Eric Davidson</a></div>
            <div class="row_5">
              <div class="column_1_4">
                <div id="side-placeholder"></div>
              </div>
  
              <!-- This is where the magic happens, everything else should be template -->
              <div class="column_3">
                  <h2>Crooked Rook</h2>

                  <p>A custom chess engine built <span class="color-text">completely from scratch</span> in only one week, strangely inspired by an episode of <span class="color-text">Lost</span>. I'm using P5.js for the graphics but the game logic is written solely by me in pure Javascript. No existing chess frameworks were used.</p>
                  <p>Take a look below the game to read more about how it was created, find out what I was able to accomplish in my one week timeframe, and see a video of me losing to the engine that I created.</p>
                  <p>Try to beat the Crooked Rook at his <span class="color-text">own game</span> but be careful ... he cheats!</p>
        


        
                  <div class="project_block">
                    <div class="project_block">
                      <div style="text-align:center">
                        <button id="status" class="button" onclick="change_all_colors">WHITE to move</button>
                      </div>
                      <div class="row_2">
                        <div class="column_6">
                          <div id="sketchdiv" style="min-height: 1px;">
                          </div>
                        </div>
                      </div>
                      <div style="text-align:center">
                        <button id="diff-one"   class="button" onclick="set_difficulty_one()">1</button>
                        <button id="diff-two"   class="button" onclick="set_difficulty_two()">2</button>
                        <button id="diff-three" class="button" onclick="set_difficulty_three()">3</button>
                        <button id="diff-four"  class="button" onclick="set_difficulty_four()">4</button>
                        <button id="diff-five"  class="button" onclick="set_difficulty_five()">5</button>
                        |
                        <button id="cheating-btn" class="button" onclick="toggle_cheating()">Cheating</button>
                        |
                        <button class="button" onclick="reset_game()">Reset</button>
                        <br>
                        <button class="button" onclick="change_pieces_to_alpha()">Alpha</button>
                        <button class="button" onclick="change_pieces_to_kosal()">Kosal</button>
                        <button class="button" onclick="change_pieces_to_letter()">Letter</button>
        
                      </div>
        
                    </div>
                  </div>
                  <h3>Game Links</h3>
                  <p style="padding-left:25px"><a href="https://github.com/erdavids/PersonalWebsite/blob/master/projects/chess-engine/chess-engine.js" target="_blank">> Source code</a></p>
                  <p style="padding-left:25px"><a href="https://www.youtube.com/watch?v=Y5nh7XDUJD4" target="_blank">> Two games and a general project overview</a></p>
                  <p style="padding-left:25px"><a href="https://www.youtube.com/watch?v=LmTFcLcm168" target="_blank">> One game with more on the inspiration for the project</a></p>
        
        
                  <h3>How It Works</h3>
                  <p>The general idea of a Chess engine is for the AI to <span class="color-text">"look ahead"</span> a certain number of moves in order to find the action that <span class="color-text">maximizes</span> it's own position or strength. The complexity comes into play when accounting for how the enemy, the human player, will try to <span class="color-text">minimize</span> the AI's position.</p>
                  <p>Position is determined by <span class="color-text">two factors</span>, the first being that each piece has an <span class="color-text">assigned value</span>. The pawns for example are valued at <span class="color-text">100</span> while each king is valued at <span class="color-text">20,000</span>. In addition to these static values, each piece has a seperate <span class="color-text">piece-square table</span> that promotes specific places on the board by adding or subtracting value. For example, the king is encouraged to stay in a <span class="color-text">defensive position</span> while the knights are encouraged to <span class="color-text">maximize their movement</span> options.</p>
        
                  <p>Taking the position evaluation functions into account, when it becomes the <span class="color-text">AI's turn</span>, it loops through each available move, attempting to <span class="color-text">maximize</span> it's position by moving pieces to better squares or by capturing. If the desired <span class="color-text">depth</span> of evaluation is greater than zero, then for every move the AI can make, it will also loop through each available move for the <span class="color-text">human player</span>. If the depth permits, then the next stage is to evaluate each of the possible moves the AI could make in response.</p>
                  <p>The more <span class="color-text">moves ahead</span> the AI can look, the stronger it will be. Unfortunately, there are just too many moves in the game of Chess for each possible scenario to be evaluated all the way to the end of the game. Luckily, a <span class="color-text">pruning system</span> is in place to limit the number of moves that are evaluated. The idea is to compare <span class="color-text">current positions</span> against previously evaluated branches in order to determine if they're even worth pursuing.</p>
                  <p>If you'd like to learn more about the code that make all this possible, check out the source code for the Crooked Rook <a href="https://github.com/erdavids/PersonalWebsite/blob/master/projects/chess-engine/chess-engine.js" target="_blank">here</a>. For anyone looking to create their own Chess engine, I received enormous benefit from the Chess programming wiki found <a href="https://www.chessprogramming.org/Main_Page" target="_href">here</a>.</p>
        
                  <h3>Accomplishments</h3>
                  <p>I'm <span class="color-text">extremely proud</span> of what I was able to accomplish in only <span class="color-text">one week</span>. I started with essentially no knowledge of how Chess engines are designed and was able to create a system in 1600 lines of JavaScript that can <span class="color-text">reliably beat me</span> at Chess.</p>
                  <p>With the correct implementation of Alpha-Beta pruning and some unique check avoidance, I enabled the engine to comfortably play up to a <span class="color-text">depth of five</span>. The number of positions evaluated at different stages of the game is still unbelievable. For example, by about <span class="color-text">six moves</span> into my most recent game with the Crooked Rook, it evaluated <span class="color-text">2,023,878</span> positions in just under <span class="color-text">8 seconds</span> before moving a piece.</p>
        
                  <h3>What I Could Have Improved</h3>
                  <p>I started the project by creating a <span class="color-text">simple grid system</span> that would allow me to move pieces based on the rules of Chess. I was excited to get something <span class="color-text">working quickly</span>, but later on in the process I became inhibited by my earlier design. For example, I failed to add the fundamental capability of <span class="color-text">castling kings</span>. Based on my structure for determining valid moves, it would have taken me at least two days of working time in order to add the ability. I do think my system works very well for what it is, but I would like to try a different way in the future.</p>
                  <p>Ideally I would alter the <span class="color-text">evaluation functions</span> throughout different stages of the game. Right now the positions are all based around early game without additional piece-square tables to transition to.</p>
                  <p>There are <span class="color-text">countless improvements</span> I could make to the AI itself, and many of them I plan on incorporating into the <span class="color-text">next version</span>. The most important thing with a Chess engine is to increase the depth of evaluation it is capable of reaching. An example of an improvement that would help is <span class="color-text">sorting the moves</span> evaluated instead of looking at each piece arbitrarily.</p>
        
                  <p>Credit for the pieces I used can be found <a href="https://github.com/veloce/lichobile/blob/master/COPYING.md" target="_blank">here</a>.</p>
              </div>
            </div>
  
  
          </div>


        <script src="../changes.js"></script>
        <script src="p5-test/p5-example.js"></script>
    </body>
</html>
